<!DOCTYPE html>
<html lang="pt-br">
<head>
</head>
<body>
    <div id="table-container"></div>
    <p id="media-ira"></p>
    <script>
        let media = 0
        fetch('http://localhost:3000/alunos')
            .then(response => response.json())
            .then(alunos => {
                const table = document.createElement("table");
                // Cabeçalho
                const header = table.insertRow();
                header.insertCell().textContent = "Nome";
                header.insertCell().textContent = "Curso";
                header.insertCell().textContent = "IRA";
                // Linhas dos alunos
                alunos.forEach(aluno => {
                    media += aluno.ira
                    const linha = table.insertRow();
                    linha.insertCell().textContent = aluno.nome;
                    linha.insertCell().textContent = aluno.curso;
                    linha.insertCell().textContent = aluno.ira;
                });

                media = alunos.length > 0 ? (media / alunos.length).toFixed(2) : 0;
                document.getElementById("table-container").appendChild(table);
                document.getElementById('media-ira').innerHTML = `Média IRA: ${media}`
            })
            .catch(erro => {
                console.log('erro na requisicão');
            });
    </script>
</body>
</html>